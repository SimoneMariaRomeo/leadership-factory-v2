TEST REPORT (2026-01-05)

This file is a simple report of what happened when I ran the tests.

How I ran the tests
- I ran each test command one by one.
- Note: `npm run test:all` stops at the first failure, so I did not use it for the full report.

Results (PASS/FAIL)
- PASS: `npm run test:schema-and-seed`
- FAIL: `npm run test:public-funnel`
- PASS: `npm run test:step4-create-learning-goal`
- PASS: `npm run test:goal-commit`
- PASS: `npm run test:define-your-goal-chat`
- FAIL: `npm run test:profile-and-journeys`
- PASS: `npm run test:journeys-and-steps`
- PASS: `npm run test:live-admin`

Summary
- 6 tests passed.
- 2 tests failed.

FAILURE DETAILS

1) `npm run test:public-funnel`
- What failed: “Learning-guide-intro page content & CTA”.
- Why it failed: the test expects a sentence that no longer matches the page text.
  - Test expects: “I'm your learning guide, here to guide your journey of discovery and growth.”
  - Page now shows: “I'm your learning guide, here to support you along your journey of discovery and growth.”
- What we can change to fix it (options):
  - Option A (recommended): update the test text in `tests/public-funnel-tests.mjs` to match the current page.
  - Option B: change the page copy back to the old sentence (this changes what users see).
  - Option C: make the test less strict (for example: only check “I'm your learning guide”).
- Things to consider:
  - Updating the test accepts the new wording (no user-facing change).
  - Changing the page copy affects the product wording and could affect translations or marketing text.
  - Making the test less strict makes it less likely to fail when copy changes, but it also means the test will catch fewer copy mistakes.

2) `npm run test:profile-and-journeys`
- What failed: “Profile shows goal and recommended journey”.
- Why it failed: the test looks for a link with the name “Latest personalized journey”, but the link’s accessible name now includes extra text (“Second intro”) because that intro text sits inside the link.
  - The page has a link whose accessible name is: “Latest personalized journey Second intro”
  - The test searches for a link named: “Latest personalized journey”
- What we can change to fix it (options):
  - Option A (recommended): update the test in `tests/profile-and-journeys-tests.js` to look for the link by partial match, or by `href`, or by finding the title text inside the link.
  - Option B: change the UI markup so the link has a stable label (for example add `aria-label="Latest personalized journey"` on the link).
  - Option C: move the intro text outside the link so the link name stays as just the title.
- Things to consider:
  - Updating the test is the smallest change, and keeps the current UI.
  - Adding `aria-label` changes what screen readers read for that link (it may hide the intro from the link label).
  - Moving the intro outside the link reduces the clickable area (some users may like clicking the whole card).

Extra note about AI tests
- `npm run test:define-your-goal-chat` calls real AI providers in the later steps.
- This can fail if API keys are missing, the network is down, or the AI response changes.
- If we want more stable tests, we can replace the real AI calls with mocked responses in test mode.
